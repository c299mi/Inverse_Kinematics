# README

## 概要

このリポジトリには、3リンクロボットアームの逆運動学と順運動学を実行するためのスクリプトが含まれています。

- `inverse_kinematics.ipynb`: 逆運動学を使用してロボットアームのエンドエフェクタを指定された目標位置に移動させます。
- `forward_kinematics.ipynb`: 順運動学を使用してロボットアームの各関節角度に基づいてエンドエフェクタの位置を計算し、プロットします。
- `mv.ipynb`: `inverse_kinematics.ipynb`で生成されたプロット画像を使用して動画を作成します。

## 依存関係

- numpy
- matplotlib
- opencv-python (mv.ipynb 用)

これらのパッケージをインストールするには、以下のコマンドを使用してください。



'''
pip install numpy matplotlib opencv-python
'''


## 逆運動学 (`inverse_kinematics.ipynb`)

### コードの説明

#### 関数

1. **Plot(X, Y, iteration)**
   - ロボットアームの現在位置と目標位置を2D平面上にプロットし、画像ファイルとして保存します。
   - `X`, `Y`: ロボットアームの各関節のx座標とy座標のリスト。
   - `iteration`: 現在の反復回数。

2. **Jacobian(L, TH)**
   - ロボットアームのヤコビアン行列を計算します。
   - `L`: リンクの長さのリスト。
   - `TH`: 関節角度のリスト。

3. **FK(L, TH, plot=False)**
   - ロボットアームの順運動学を計算し、エンドエフェクタの位置を返します。
   - `L`: リンクの長さのリスト。
   - `TH`: 関節角度のリスト。
   - `plot`: 中間関節の位置をプロット用に返すかどうかを示すブール値。

4. **limit_angles(TH, TH_min, TH_max)**
   - 関節角度が指定された制限範囲内にあることを保証します。
   - `TH`: 現在の関節角度のリスト。
   - `TH_min`, `TH_max`: 最小および最大関節角度のリスト。

### 実行方法

`inverse_kinematics.ipynb`ノートブックを開き、セルを順番に実行してください。スクリプトはロボットアームの位置をプロットし、各反復ごとに画像ファイルとして保存します。

## 順運動学 (`forward_kinematics.ipynb`)

### コードの説明

このノートブックは、指定された関節角度に基づいて6リンクロボットアームのエンドエフェクタの位置を計算し、プロットします。

#### 関数

1. **calculate_and_plot_robot(L1, L2, L3, L4, L5, L6, theta2, theta3, theta4)**
   - ロボットアームの各リンクの終端座標を計算し、2D平面上にプロットします。
   - `L1, L2, L3, L4, L5, L6`: 各リンクの長さ。
   - `theta2, theta3, theta4`: 各関節の角度（度単位）。

### 実行方法

`forward_kinematics.ipynb`ノートブックを開き、セルを順番に実行してください。スクリプトはロボットアームの現在位置をプロットし、各リンクの終端座標をコンソールに表示します。

### 実行例

リンク1の終端座標: (-0.522, 0.522)
リンク2の終端座標: (-1.040, 1.171)
リンク3の終端座標: (-0.735, 2.043)
リンク4の終端座標: (-1.245, 2.686)
リンク5の終端座標: (-1.845, 3.186)
エンドエフェクタの座標: (-1.845, 4.186)


## 動画作成 (`mv.ipynb`)

### コードの説明

このノートブックは、`inverse_kinematics.ipynb`で生成されたプロット画像を使用して動画を作成します。

#### 関数

1. **create_video(image_folder, video_name, fps=10)**
   - 保存されたプロット画像から動画を作成します。
   - `image_folder`: 画像が保存されているフォルダのパス。
   - `video_name`: 作成する動画ファイルの名前。
   - `fps`: フレームレート（デフォルトは10）。

### 実行方法

`mv.ipynb`ノートブックを開き、セルを順番に実行してください。スクリプトは指定されたフォルダ内の画像を使用して動画を作成します。

### 実行例

生成された動画ファイル `robot_arm_animation.mp4` は、各反復ごとのロボットアームの動きを示します。

## 注意

- リンクの長さや目標位置は、特定のアプリケーションに応じて調整してください。
- 初期関節角度と目標位置が、リンクの長さおよび関節の制限範囲内で実現可能であることを確認してください。

